@model Notes_MarketPlace.Models.DashboardModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

<section id="dashboard">
    <div class="container">

        <div class="row margin-dashboard">
            <div class="col-md-6 col-sm-6">
                <h3>Dashboard</h3>
            </div>

            <div class="col-md-6 col-sm-6">
                <a class="nav-link" href="@Url.Action("AddNotes", "SellYourNote")">
                    <button class="btn btn-primary btn-dashboard pull-right">
                        <span>ADD NOTE</span>
                    </button>
                </a>
            </div>


        </div>


        <div class="row main-box sd-1">
            <div class="col-md-2 space-dashboard col-xs-4 col-sm-2">

                <div class="box">
                    <div class="row text-center">
                        <div class="img-dashboard">
                            <img src="~/Content/Front_Images/images/my-earning.png" class="img-responsive img-inner-dashboard">
                        </div>
                    </div>
                    <div class="row text-center">
                        <p><span>My Earning</span></p>
                    </div>
                </div>

            </div>
            <div class="col-md-2 col-sm-2 col-xs-4 space-dashboard box1 box2 ">

                <div class="box">
                    <div class="row text-center">
                        <a href="#"><h4>@Model.NumberOfSoldNotes</h4></a>

                    </div>
                    <div class="row text-center">
                        <a href="#"><p>Number of Notes Sold</p></a>
                    </div>
                </div>
            </div>
            <div class="col-md-2 col-sm-2 col-xs-4 space-dashboard box2">
                <div class="box">
                    <div class="row text-center">
                        @if (Model.MoneyEarned == null)
                        {
                            <a href="#"><h4>$ 0</h4></a>
                        }
                        else
                        {
                            <a href="#">@Model.MoneyEarned</a>
                        }

                    </div>
                    <div class="row text-center">
                        <a href="#"><p>Money Earned</p></a>

                    </div>
                </div>

            </div>
            <div class="col-md-2 col-sm-2 col-xs-4 space-dashboard">
                <div class="box">
                    <div class="row text-center">
                        <a href="#"><h4>@Model.MyDownloads</h4></a>

                    </div>
                    <div class="row text-center">
                        <a href="#"><p>My Downloads</p></a>

                    </div>
                </div>

            </div>
            <div class="col-md-2 col-sm-2 col-xs-4 space-dashboard">
                <div class="box">
                    <div class="row text-center">
                        <a href="#">
                            <h4>@Model.MyRejectedNotes</h4>
                        </a>

                    </div>
                    <div class="row text-center">
                        <a href="#"><p>My Rejected Notes</p></a>

                    </div>
                </div>

            </div>
            <div class="col-md-2 col-sm-2 col-xs-4 space-dashboard">
                <div class="box">
                    <div class="row text-center">
                        <a href="#"><h4>@Model.BuyerRequest</h4></a>

                    </div>
                    <div class="row text-center">
                        <a href="#"><p>Buyer Requests</p></a>

                    </div>
                </div>

            </div>
        </div>
    </div>


    <nav class="navbar navbar-dashboard">
        <div class="container">
            @using (Html.BeginForm("Dashboard", "SellYourNote", FormMethod.Get))
            {
                <div class="row heading-dashboard">
                    <div class="col-md-6">

                        <h4>In Progress Notes</h4>

                    </div>
                    <div class="col-md-6 text-right for-s-b col-sm-12 col-xs-12">
                        <div class="right-dashboard">
                            <input placeholder="Search" class="search-bar form-control" name="search1" value="@ViewBag.Search1">
                            <input type="search" name="search2" value="@ViewBag.Search2" hidden>
                            <button type="submit" class="btn btn-search"><span>SEARCH</span></button>
                        </div>

                    </div>
                </div>
            }


            <table class="table f-d-b f-d-b1">
                <thead>
                    <tr class="head-table">
                        <th>@Html.ActionLink("Added date", "Dashboard", new { sort1 = ViewBag.Sort1 == null ? "CreatedDate_Asc" : (ViewBag.Sort1 == "CreatedDate_Desc" ? "CreatedDate_Asc" : "CreatedDate_Desc"), sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Title", "Dashboard", new { sort1 = ViewBag.Sort1 == null ? "Title_Asc" : (ViewBag.Sort1 == "Title_Asc" ? "Title_Desc" : "Title_Asc"), sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Category", "Dashboard", new { sort1 = ViewBag.Sort1 == null ? "Category_Asc" : (ViewBag.Sort1 == "Category_Asc" ? "Category_Desc" : "Category_Asc"), sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Status", "Dashboard", new { sort1 = ViewBag.Sort1 == null ? "Status_Asc" : (ViewBag.Sort1 == "Status_Asc" ? "Status_Desc" : "Status_Asc"), sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th class="content-center text-center">Actions</th>
                    </tr>
                </thead>

                <tbody>
                    @if (Model.InProgressNotes.Count() == 0)
                    {
                        <tr class="no-record">
                            <td colspan="5" class="text-center">No Record Found</td>
                        </tr>
                    }
                    else
                    {
                        foreach (var inprogressnote in Model.InProgressNotes)
                        {
                            <tr>
                                <td>@inprogressnote.AddedDate.Value.ToString("dd-MM-yyyy")</td>
                                <td>@inprogressnote.Title</td>
                                <td>@inprogressnote.Category</td>
                                <td>@inprogressnote.Status</td>
                                <td class="text-center">
                                    @if (inprogressnote.Status.ToLower().Equals("draft"))
                                    {
                                        <div class="inner-action">
                                            <div class="img-in-table">
                                                <a href="@Url.Action("EditNotes", "SellYourNote", new { id = inprogressnote.NoteID })">
                                                    <img src="~/Content/Front_Images/images/edit.png" class="img-responsive text-center">
                                                </a>
                                            </div>
                                            <div class="img-in-table">
                                                <a href="@Url.Action("DeleteDraft", "SellYourNote", new { id = inprogressnote.NoteID })"><img src="~/Content/Front_Images/images/delete.png" class="img-responsive" data-toggle="modal" data-target="delete-id"></a>
                                            </div>
                                        </div>

                                        <div class="modal fade " id="delete-id" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-confirm-body">
                                                        <div>
                                                            <form>

                                                                <p class="confirm-text">
                                                                    Are you sure, you want to delete this note?
                                                                </p>

                                                                <div class="btn-confirm">
                                                                    <a class="btn btn-yes" href="@Url.Action("DeleteDraft", "SellYourNote", new { id = inprogressnote.NoteID })">YES</a>
                                                                    <a class="btn btn-no" role="button" data-dismiss="modal" aria-label="Close">NO</a>
                                                                </div>

                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <a href="@Url.Action("Notes", "SearchNotes", new { id = @inprogressnote.NoteID })"><img src="~/Content/Front_Images/images/eye.png" alt="view" class="eye"></a>

                                    }
                                </td>

                            </tr>
                        }
                    }






                </tbody>
            </table>


        </div>
    </nav>

    @if (Model.InProgressNotes.Count() != 0)
    {
        <div class="row justify-content-center pagination-margin">

            <nav aria-label="...">
                <ul class="pagination flex-wrap">

                    <li class="page-item">
                        @if (ViewBag.Page1 == 1)
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2  })"><i class="fa fa-angle-left"></i></a>
                        }
                        else
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1 - 1, page2 = @ViewBag.Page2 })"><i class="fa fa-angle-left"></i></a>
                        }
                    </li>

                    @{
                        double? TotalPagesInProgress = ViewBag.TotalPagesInProgress;

                        if (ViewBag.Page1 != 1 && ViewBag.Page1 - 2 > 1)
                        {
                            int page = Convert.ToInt32(@ViewBag.Page1) - 3;
                            <li class="page-item">@Html.ActionLink("1", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = 1, page2 = @ViewBag.Page2 }, new { @class = "page-link" })</li>
                            if (page != 1)
                            {
                                <li class="page-item more-pages-dots">@Html.ActionLink("...", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = page, page2 = @ViewBag.Page2 }, new { @class = "page-link more-pages-dots" })</li>
                            }
                        }

                        for (int i = 2; i > 0; i--)
                        {
                            if (ViewBag.Page1 - i > 0)
                            {
                                int page = Convert.ToInt32(@ViewBag.Page1) - i;
                                <li class="page-item">@Html.ActionLink(page.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = page, page2 = @ViewBag.Page2 }, new { @class = "page-link" })</li>
                            }
                        }

                        <li class="page-item active">
                            <a class="page-link">@ViewBag.Page1<span class="sr-only">(current)</span></a>
                        </li>

                        for (int i = 1; i < 3; i++)
                        {
                            if (ViewBag.Page1 + i <= TotalPagesInProgress)
                            {
                                int page = Convert.ToInt32(@ViewBag.Page1) + i;
                                <li class="page-item">@Html.ActionLink(page.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = page, page2 = @ViewBag.Page2 }, new { @class = "page-link" })</li>
                            }
                        }

                        if (ViewBag.Page1 != TotalPagesInProgress && ViewBag.Page1 + 2 < TotalPagesInProgress)
                        {
                            int page = Convert.ToInt32(@ViewBag.Page1) + 3;
                            if (page != TotalPagesInProgress)
                            {
                                <li class="page-item">@Html.ActionLink("...", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = page, page2 = @ViewBag.Page2 }, new { @class = "page-link more-pages-dots" })</li>
                            }
                            <li class="page-item">@Html.ActionLink(TotalPagesInProgress.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = TotalPagesInProgress, page2 = @ViewBag.Page2 }, new { @class = "page-link" })</li>
                        }

                    }

                    <li class="page-item">
                        @if (ViewBag.Page1 == TotalPagesInProgress)
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2  })"><i class="fa fa-angle-right"></i></a>
                        }
                        else
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1 + 1, page2 = @ViewBag.Page2  })"><i class="fa fa-angle-right"></i></a>
                        }
                    </li>

                </ul>
            </nav>

        </div>
    }



    <nav class="navbar navbar-dashboard">
        <div class="container">
            @using (Html.BeginForm("Dashboard", "SellYourNote", FormMethod.Get))
            {
                <div class="row heading-dashboard">
                    <div class="col-md-6">

                        <h4>Published Notes</h4>

                    </div>
                    <div class="col-md-6 text-right for-s-b col-sm-12 col-xs-12">
                        <div class="right-dashboard">
                            <input type="search" name="search1" value="@ViewBag.Search1" hidden>
                            <input type="search" name="search2" class="form-control search-bar" id="search" value="@ViewBag.Search2" placeholder="Search">

                            <button type="submit" class="btn btn-search"><span>SEARCH</span></button>
                        </div>

                    </div>
                </div>


            }

            <table class="table f-d-b">
                <thead>
                    <tr>
                        <th>@Html.ActionLink("Added date", "Dashboard", new { sort2 = ViewBag.Sort2 == null ? "PublishedDate_Asc" : (ViewBag.Sort2 == "PublishedDate_Asc" ? "PublishedDate_Desc" : "PublishedDate_Asc"), sort1 = @ViewBag.Sort1, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Title", "Dashboard", new { sort2 = ViewBag.Sort2 == null ? "Title_Asc" : (ViewBag.Sort2 == "Title_Asc" ? "Title_Desc" : "Title_Asc"), sort1 = @ViewBag.Sort1, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Category", "Dashboard", new { sort2 = ViewBag.Sort2 == null ? "Category_Asc" : (ViewBag.Sort2 == "Category_Asc" ? "Category_Desc" : "Category_Asc"), sort1 = @ViewBag.Sort1, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Sell Type", "Dashboard", new { sort2 = ViewBag.Sort2 == null ? "IsPaid_Asc" : (ViewBag.Sort2 == "IsPaid_Asc" ? "IsPaid_Desc" : "IsPaid_Asc"), sort1 = @ViewBag.Sort1, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th>@Html.ActionLink("Price", "Dashboard", new { sort2 = ViewBag.Sort2 == null ? "SellingPrice_Asc" : (ViewBag.Sort2 == "SellingPrice_Asc" ? "SellingPrice_Desc" : "SellingPrice_Asc"), sort1 = @ViewBag.Sort1, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2, search1 = @ViewBag.Search1, search2 = @ViewBag.Search2 })</th>
                        <th class="content-center">Actions</th>
                    </tr>


                </thead>

                <tbody>
                    @if (Model.PublishedNotes.Count() == 0)
                    {
                        <tr class="no-record">
                            <td colspan="6" class="text-center">No Record Found</td>
                        </tr>
                    }
                    else
                    {
                        foreach (var publishednote in Model.PublishedNotes)
                        {
                            <tr>
                                <td>@publishednote.PublishedDate.Value.ToString("dd-MM-yyyy")</td>
                                <td>@publishednote.Title</td>
                                <td>@publishednote.Category</td>
                                <td>@publishednote.SellType</td>
                                @if (publishednote.Price != null)
                                {
                                    <td>$@publishednote.Price</td>
                                }
                                else
                                {
                                    <td>$0</td>
                                }
                                <td>
                                    <div class="table-images">
                                        <a href="@Url.Action("Notes", "SearchNotes", new { id = @publishednote.NoteID })"><img src="~/images/Dashboard/eye.png" alt="view" class="eye"></a>
                                    </div>
                                </td>
                            </tr>
                        }
                    }



                </tbody>
            </table>


        </div>
    </nav>

    @if (Model.PublishedNotes.Count() != 0)
    {
        <div class="row justify-content-center pagination-margin">

            <nav aria-label="...">
                <ul class="pagination flex-wrap">

                    <li class="page-item">
                        @if (ViewBag.Page2 == 1)
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2  })"><i class="fa fa-angle-left"></i></a>
                        }
                        else
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2 - 1 })"><i class="fa fa-angle-left"></i></a>
                        }
                    </li>

                    @{
                        double? TotalPagesInPublished = ViewBag.TotalPagesInPublished;

                        if (ViewBag.Page2 != 1 && ViewBag.Page2 - 2 > 1)
                        {
                            int page = Convert.ToInt32(@ViewBag.Page2) - 3;
                            <li class="page-item">@Html.ActionLink("1", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = 1 }, new { @class = "page-link" })</li>
                            if (page != 1)
                            {
                                <li class="page-item more-pages-dots">@Html.ActionLink("...", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = page }, new { @class = "page-link more-pages-dots" })</li>
                            }
                        }

                        for (int i = 2; i > 0; i--)
                        {
                            if (ViewBag.Page2 - i > 0)
                            {
                                int page = Convert.ToInt32(@ViewBag.Page2) - i;
                                <li class="page-item">@Html.ActionLink(page.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page2, page2 = page }, new { @class = "page-link" })</li>
                            }
                        }

                        <li class="page-item active">
                            <a class="page-link">@ViewBag.Page2<span class="sr-only">(current)</span></a>
                        </li>

                        for (int i = 1; i < 3; i++)
                        {
                            if (ViewBag.Page2 + i <= TotalPagesInPublished)
                            {
                                int page = Convert.ToInt32(@ViewBag.Page2) + i;
                                <li class="page-item">@Html.ActionLink(page.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = page }, new { @class = "page-link" })</li>
                            }
                        }

                        if (ViewBag.Page2 != TotalPagesInPublished && ViewBag.Page2 + 2 < TotalPagesInPublished)
                        {
                            int page = Convert.ToInt32(@ViewBag.Page2) + 3;
                            if (page != TotalPagesInPublished)
                            {
                                <li class="page-item">@Html.ActionLink("...", "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = page }, new { @class = "page-link more-pages-dots" })</li>
                            }
                            <li class="page-item">@Html.ActionLink(TotalPagesInPublished.ToString(), "Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort1, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = TotalPagesInPublished }, new { @class = "page-link" })</li>
                        }

                    }

                    <li class="page-item">
                        @if (ViewBag.Page2 == TotalPagesInPublished)
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort2, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2 })"><i class="fa fa-angle-right"></i></a>
                        }
                        else
                        {
                            <a class="page-link" href="@Url.Action("Dashboard", new { search1 = @ViewBag.Search1, search2 = @ViewBag.Search2, sort1 = @ViewBag.Sort2, sort2 = @ViewBag.Sort2, page1 = @ViewBag.Page1, page2 = @ViewBag.Page2 + 1 })"><i class="fa fa-angle-right"></i></a>
                        }
                    </li>

                </ul>
            </nav>

        </div>
    }



</section>

<style>
    h4 {
        font-weight: 600;
    }

    .right-dashboard input {
        padding-left: 30px;
    }

    .search-bar {
        display: inline;
    }

    .right-dashboard {
        line-height: 80px;
    }

    .pagination-margin {
        margin-top: -10px;
        margin-bottom: -10px;
    }

    .pagination > .active > a {
        background-color: #6255a5;
    }

    tr th a {
        color: black;
    }

    a {
        color: black;
        text-decoration: none;
    }
</style>

